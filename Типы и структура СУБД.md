Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

электронные чеки в json-виде,
склады и автомобильные дороги для логистической компании,
генеалогические деревья,
кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
отношения клиент-покупка для интернет-магазина.
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Решение:

Электронные чеки в JSON-виде:

Рекомендация: Документо-ориентированные СУБД (например, MongoDB).
Объяснение: JSON-структура хорошо соответствует документо-ориентированным базам данных, таким как MongoDB. Эти базы данных позволяют хранить и индексировать JSON-документы, что делает их удобными для хранения электронных чеков с переменными полями.
Склады и автомобильные дороги для логистической компании:

Рекомендация: Пространственные базы данных (например, PostGIS для PostgreSQL).
Объяснение: Пространственные базы данных поддерживают географические данные, такие как точки, линии и полигоны. Это идеально подходит для хранения информации о складах и автомобильных дорогах, так как они часто связаны с географическими координатами.
Генеалогические деревья:

Рекомендация: Графовые базы данных (например, Neo4j).
Объяснение: Графовые базы данных эффективно моделируют связи между сущностями и хорошо подходят для представления генеалогических деревьев, где каждый узел может быть связан с родителями, потомками и другими родственниками.
Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации:

Рекомендация: Ключ-значение хранилище (например, Redis).
Объяснение: Ключ-значение хранилища отлично подходят для кеширования, так как они обеспечивают быстрый доступ к данным по ключу. Redis поддерживает установку времени жизни для ключей, что подходит для ограничения времени жизни идентификаторов клиентов.
Отношения клиент-покупка для интернет-магазина:

Рекомендация: Реляционные СУБД (например, PostgreSQL, MySQL).
Объяснение: Реляционные базы данных хорошо подходят для моделирования связей между сущностями. Сущности "клиент" и "покупка" могут быть представлены в виде таблиц, а связи между ними могут быть управляемы с использованием внешних ключей.


Задача 2
Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

данные записываются на все узлы с задержкой до часа (асинхронная запись);
при сетевых сбоях система может разделиться на 2 раздельных кластера;
система может не прислать корректный ответ или сбросить соединение.
Согласно PACELC-теореме как бы вы классифицировали эти реализации?

Решение:

Данные записываются на все узлы с задержкой до часа (асинхронная запись):

CAP: CP (Consistent and Partition-tolerant).
PACELC: PA/EL (Partition-tolerant and Eventually Consistent with Latency).
Объяснение: Здесь система выбирает поддержку согласованности и устойчивости к разделению, но может при этом жертвовать некоторой задержкой для записи.

При сетевых сбоях система может разделиться на 2 раздельных кластера:

CAP: AP (Available and Partition-tolerant).
PACELC: PA (Partition-tolerant and Available).
Объяснение: Здесь система выбирает поддержку доступности и устойчивости к разделению, допуская возможность временной несогласованности.

Система может не прислать корректный ответ или сбросить соединение:

CAP: CA (Consistent and Available).
PACELC: CL (Consistent and Low Latency).
Объяснение: Здесь система выбирает поддержку согласованности и доступности, с фокусом на минимизации задержек.

Задача 3
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Решение:

Принципы BASE (Basically Available, Soft state, Eventually consistent) и ACID (Atomicity, Consistency, Isolation, Durability) 
представляют различные подходы к обеспечению свойств распределенных систем. Они являются противоположными по своей сути и не могут быть полностью сочетаемыми в рамках одной системы.
BASE предполагает, что в распределенных системах можно сделать уступки в пользу доступности и отказоустойчивости, допуская временную несогласованность данных. Основные принципы BASE:

Basically Available: Система всегда готова предоставить ответ, даже при возможных разделениях в сети или других сбоях.

Soft state: Состояние системы может изменяться динамически в течение времени даже в отсутствие внешних воздействий.

Eventually consistent: Система становится согласованной в конечный момент времени, когда все изменения данных распределенной системы завершены.

ACID, напротив, представляет собой традиционный набор свойств, обеспечивающих надежность и согласованность транзакций в базах данных:

Atomicity: Транзакции являются неделимыми и либо полностью выполняются, либо не выполняются вовсе.

Consistency: Транзакции переводят базу данных из одного согласованного состояния в другое согласованное состояние.

Isolation: Выполнение одной транзакции изолировано от выполнения других транзакций.

Durability: Результаты успешно выполненных транзакций сохраняются и остаются стойкими к сбоям.

Сочетание этих двух подходов в рамках одной системы будет сложно реализовать, поскольку они предоставляют различные гарантии и приоритеты. 
Однако, в некоторых случаях, в распределенных системах могут использоваться архитектурные решения, которые комбинируют принципы BASE и ACID в разных частях системы в зависимости от конкретных требований и сценариев использования.

Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:

фиксация некоторых значений с временем жизни,
реакция на истечение таймаута.
Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?

Решение:
В данном случае я бы применил Redis, так как это высокопроизводительное key-value-хранилище, которое поддерживает различные структуры данных, включая строки, списки, множества, хеш-таблицы и другие.
Он также предоставляет механизм Pub/Sub для реализации паттерна "издатель-подписчик".

Принципы работы:
Фиксация значений с временем жизни: Redis позволяет устанавливать время жизни для ключей, после которого они автоматически удаляются. Это можно использовать для фиксации значений с определенным временем жизни.
Реакция на истечение таймаута: Механизм Pub/Sub позволяет подписчикам реагировать на изменения в системе. В данном случае, это может быть использовано для реакции на истечение таймаута при помощи механизма подписки на события.

Минусы использования Redis в данном контексте:
Хранение в памяти: Redis хранит данные в оперативной памяти, что может быть ограничением для больших объемов данных. Если требуется хранение данных, превышающих доступную память, это может быть проблемой.
Дискретные моменты Pub/Sub: Pub/Sub в Redis предоставляет дискретные моменты уведомлений. Если важно получать уведомления в режиме реального времени, возможно, потребуется дополнительная логика обработки событий.
Отсутствие сохранности данных: В случае сбоя Redis в режиме записи, возможна потеря данных, так как Redis по умолчанию настроен на максимальную производительность, а не на максимальную сохранность данных.
Ограниченная поддержка структур данных: Хотя Redis поддерживает различные структуры данных, иногда может потребоваться более сложная модель данных, которую Redis не предоставляет.

